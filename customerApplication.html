<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/3b358be334.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="customerStyle.css">
    <title>Loan Application - Pepper</title>
</head>
<body>

    <main id="nav">

    </main>
    

    <div class="container-fluid" id="grad1">
        <div class="row justify-content-center mt-0">
            <div class="col-11 col-sm-9 col-md-7 col-lg-6 text-center p-0 mt-3 mb-2">
                <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2><strong>Loan Application - Pepper</strong></h2>
                    <p>Fill all required form inputs to go to the next step</p>
                    <div class="row">
                        <div class="col-md-12 mx-0">
                            <form action="" id="msform">
                                <!-- progressbar -->
                                <ul id="progressbar">
                                    <li class="active" id="personal"><strong>Personal</strong></li>
                                    <li id="employment"><strong>Employment</strong></li>
                                    <li id="payment"><strong>Payment</strong></li>
                                    <li id="loan_request"><strong>Loan Request</strong></li>  
                                </ul>   
                                <!-- begginning of wizard -->
                                <fieldset>
                                    <div class="form-card">
                                       <h2 class="fs-title">Personal Information</h2>
                                        <label for="Title">Title</label>
                                        <select id="title" class="form-control">
                                            <option>Mr</option>
                                            <option>Mrs</option>
                                            <option>Other</option>
                                        </select>
                                        <input type="text" class="form-control" id="customerBvn" placeholder="BVN">
                                        <label for="name">Name(Surname first)</label>
                                        <div class="row">
                                            <div class="col">
                                              <input type="text" id="customerFirstName" class="form-control" placeholder="First name">
                                            </div>
                                            <div class="col">
                                              <input type="text" id="customerLastName" class="form-control" placeholder="Last name">
                                            </div>
                                          </div>
                                          <input type="date" id="customerDob" class="form-control" data-date-format="mm/dd/yyyy" placeholder="Date of Birth">
                                          
                                          <input type="text" id="customerNationality" class="form-control" placeholder="Nationality">
                                          <input type="text" id="customerAddress" name="address" class="form-control" placeholder="Address">
                                    
                                          <label for="">ID type:</label>
                                          <input type="file" id="customerId" class="form-control-file" id="exampleFormControlFile1">
                                          <input type="number" id="customerPn" class="form-control" placeholder="P/N">
                                          <input type="email" name="email" id="customerEmail" class="form-control" placeholder="Email">

                                          <div class="form-group">
                                            <h2 class="fs-title">Guarantor Details</h2>
                                            <input type="text" id="guarantorName" class="form-control" placeholder="Name">
                                            <input type="text" id="guarantorAddress" class="form-control" placeholder="Address">
                                            <input type="text" id="guarantorPn" class="form-control" placeholder="P/N">
                                            <input type="text" id="guarantotBusiness" class="form-control" placeholder="Nature of Business">
                                            <input type="number" id="guarantorBvn" class="form-control" placeholder="BVN No">
                                        </div>

                                    </div>
                                    <input type="button" name="next" class="next action-button" value="Next Step" />
                                </fieldset>
                                <fieldset>
                                    <div class="form-card">
                                        <h2 class="fs-title">Employment Details</h2>
                                        <input type="text" id="customerOccupation" class="form-control" placeholder="Occupation">
                                        <input type="text" id="customerOrg" class="form-control" placeholder="Name of Organization">
                                        <label class="empStatus">Employment Status</label>
                                        <select id="empStatus" class="form-control">
                                            <option>Employed</option>
                                            <option>Unemployed</option>
                                            <option>Other</option>
                                        </select>
                                        <input type="text" id="customerOfficeAddress" class="form-control mt-3" placeholder="Office Address">
                                         <input type="text" id="customerOrgPn" class="form-control" placeholder="P/N of Organization">

                                         <div class="form-group mt-3">
                                            
                                            <label for="">Net Monthly Income</label>
                                            <select id="netMonthlyIncome" class="form-control">
                                                <option>30,000-99,999</option>
                                                <option>100,000-199-999</option>
                                                <option>200,00-399,999</option>
                                                <option>400,000-499,999</option>
                                                <option>500,000-999,999</option>
                                                <option>1,000,000-above</option>
                                            </select>
                                        </div>
                                    </div>
                                    <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                    <input type="button" name="next" class="next action-button" value="Next Step" />
                                </fieldset>
                     
                                    
                                    
                                <fieldset>
                                    <div class="form-card">
                                        
                                        <h2 class="fs-title">Payment Options</h2>

                                        <!-- <p style="font-weight: bold; font-size: 20px;">Do you want us to debit your account at the end of every month?</p>
                                        <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                        <label class="form-check-label" for="defaultCheck1">
                                                          Direct Debit Mandate
                                                        </label>
                                                    </div> -->
                    
                                                 <div class="form-group">
                                                    <p class="pay_ATM">Fill in your card details</p>
                                                    <label class="pay">Card Holder Name*</label> <input type="text" name="holdername" placeholder="" />
                                                    <div class="row">
                                                        <div class="col-9"> <label class="pay">Card Number*</label> <input type="text" name="cardno" id="customerCardNo" placeholder="" /> </div>
                                                        <div class="col-3"> <label class="pay">CVC*</label> <input type="password" name="cvcpwd" id="customerPassword" placeholder="***" /> </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-3"> <label class="pay">Expiry Date*</label> </div>
                                                        <div class="col-9"> <select class="list-dt" id="month" name="expmonth">
                                                                <option selected>Month</option>
                                                                <option>January</option>
                                                               <option>February</option>
                                                                <option>March</option>
                                                                <option>April</option>
                                                                <option>May</option>
                                                                <option>June</option>
                                                                <option>July</option>
                                                                <option>August</option>
                                                                <option>September</option>
                                                                <option>October</option>
                                                                <option>November</option>
                                                                <option>December</option>
                                                            </select> <select class="list-dt" id="year" name="expyear">
                                                                <option selected>Year</option>
                                                            </select> </div>
                                                    </div>
                                                 </div>         
                                            </div>
                                            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                             <input type="button" name="next" class="next action-button" value="Next Step" />
                                       
                                </fieldset>
                                <fieldset>
                                    <div class="form-card">
                                        <h2 class="fs-title">Loan Request Information</h2>
                                        <input type="number" id="loanAmount" placeholder="Loan Amount">
                                        <div class="form-group">
                                            <label for="" class="form-control loanPurpose">Loan purpose</label>
                                            <select id="loanPurpose" class="form-control">
                                                <option>Travel</option>
                                                <option>Education</option>
                                                <option>Personal Consumption</option>
                                                <option>Appliances</option>
                                                <option>Business</option>
                                                <option>Others</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleFormControlTextarea1">Description:</label>
                                            <textarea class="form-control" id="loanDescription" rows="3"></textarea>
                                          </div>
                                          <div class="form-group">
                                              <label class="branch">Branch</label>
                                               <select name="" id="branchLocations" class="form-control">
                                                   
                                               </select>
                                          </div>
                                          <input type="number" class="form-control" id="tenor" placeholder="Tenor(Months)">
                                          <input type="number" class="form-control" id="customerAcctNo" placeholder="Account Number with AstraPolaris MFB">
                                          <div class="form-group">
                                              <label for="">Have you previously obtained loan from other banks?</label>
                                              <div class="d-flex flex-row">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label pl-3" for="defaultCheck1">
                                                        Y
                                                      </label>
                                                </div>
                                                <div class="form-check ml-2">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label pl-3" for="defaultCheck1">
                                                      N
                                                    </label>
                                                </div>
                                              </div>
                                          </div>
                                          <div class="form-group mt-3">
                                            <p>If yes, please fill in the inputs below.</p>
                                            <input type="text" class="form-control" id="existingBank" placeholder="Name of Bank/Institution">
                                            <input type="text" class="form-control" id="existingType" placeholder="Type of Loan">
                                        </div>
                                    
                                    </div>
                                    <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                     <input type="button" name="make_payment" class="next action-button" id="submit" value="Submit" />
                                </fieldset>
                                <fieldset>
                                    <div class="form-card">
                                        <h2 class="fs-title text-center">Success !</h2> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-3"> <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image"> </div>
                                        </div> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-7 text-center">
                                                <h5>Loan Application Sucessful</h5>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js" integrity="sha512-DZqqY3PiOvTP9HkjIWgjO6ouCbq+dxqWoJZ/Q+zPYNHmlnI2dQnbJ5bxAHpAMw+LXRm4D72EIRXzvcHQtE8/VQ==" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function(){

                        axios({
                        method:'get',
                        
                        url: 'http://192.168.1.114:5000/branches'
                    })
                    .then(function (response) {
                   let branches = response.data
                    for(i=0; i<branches.length; i++){
                       let branch = branches[i].branch
                       let branchId = branches[i].branchId
                       $("#branchLocations").append("<option value="+branchId+">  "+branch+" </option>")
                    }
                    console.log(response);
                    })
                   .catch(function (error) {
                    console.log(error);
                   });
                        
            let current_fs, next_fs, previous_fs
            let opacity
            $('.next').click(function(){
                current_fs = $(this).parent()
                next_fs = $(this).parent().next()

                $('#progressbar li').eq($('fieldset').index(next_fs)).addClass('active')
                next_fs.show()
                current_fs.animate({opacity:0},{
                    step:function(now){
                        opacity = 1 - now
                        current_fs.css({
                            'display':'none',
                            'position':'relative'
                        })
                        next_fs.css({'opacity':opacity})
                    },
                    duration:600
                })
            })

            $('.previous').click(function(){
                current_fs = $(this).parent()
                previous_fs = $(this).parent().prev()
                $('#progressbar li').eq($('fieldset').index(current_fs)).removeClass('active')
                previous_fs.show()
                current_fs.animate({opacity:0},{
                    step:function(now){
                        opacity = 1 - now
                        current_fs.css({
                            'display':'none',
                            'position':'relative'
                        })
                        previous_fs.css({'opacity':opacity})
                    },
                    duration:600
                })
            })

            $('.radio-group .radio').click(function(){
            $(this).parent().find('.radio').removeClass('selected')
            $(this).addClass('selected')
            })
            $(".submit").click(function(){
           return false;
           
           
        })

       
        // $("#nav").load("navbar.html")


        $("#submit").click(function(){

        let branchId = $("#branchLocations option:selected").val()
        let branchName = $("#branchLocations option:selected").text()
        let firstName = $("#customerFirstName").val()
        let lastName = $("#customerLastName").val()
        let nationality = $("#customerNationality").val()
        let address = $("#customerAddress").val()
        let pn = $("#customerPn").val()
        let email = $("#customerEmail").val()
        let guarantorName = $("#guarantorName").val()
        let guarantorAddress = $("#guarantorAddress").val()
        let guarantorPn = $("#guarantorPn").val()
        let guarantotBusiness = $("#guarantotBusiness").val()
        let guarantorBvn= $("#guarantorBvn").val()
        let customerOccupation = $("#customerOccupation").val()
        let customerOrg = $("#customerOrg").val()
        let empStatus = $("#empStatus").val()
        let customerOfficeAddress = $("#customerOfficeAddress").val()
        let customerOrgPn = $("#customerOrgPn").val()
        let netMonthlyIncome = $("#netMonthlyIncome").val()
        let customerCardNo = $("#customerCardNo").val()
        let customerPassword = $("#customerPassword").val()
        let month = $("#month").val()
        let loanAmount = $("#loanAmount").val()
        let loanPurpose = $("#loanPurpose").val()
        let loanDescription = $("#loanDescription").val()
        let tenor = $("#tenor").val()
        let customerAcctNo = $("#customerAcctNo").val()
        let existingBank = $("#existingBank").val()
        let existingType = $("#existingType").val()
        let customerId = $("##customerId").val()

        axios({
            method:'post',
            url:'http://192.168.1.114:5000/customerapplication',
            data:{
         form:  {
        fullName: firstName,
        age: lastName,
        username: nationality,
        branch: branchName,
        branchId: branchId,
        gender: address,
        salary: loanAmount,
        occupation: customerOccupation,
        loantype: customerOfficeAddress,
        tenor: tenor,
    }
            }
        })
        .then((response) =>{
            console.log(response)
        })
         .catch(error => console.log(error))
       


        console.log(branchId)
        console.log(branchName)
        console.log(firstName)
        console.log(lastName)
        console.log(nationality)
        console.log(address)
        console.log(pn)
        console.log(email)
        console.log(guarantorName)
        console.log(guarantorAddress)
        console.log(guarantorPn)
        console.log(guarantotBusiness)
        console.log(guarantorBvn)
        console.log(customerOccupation)
        console.log(customerOrg)
        console.log(empStatus)
        console.log(customerOfficeAddress)
        console.log(customerOrgPn)
        console.log(netMonthlyIncome)
        console.log(customerCardNo)
        console.log(customerPassword)
        console.log(month)
        console.log(loanAmount)
        console.log(loanPurpose)
        console.log(loanDescription)
        console.log(tenor)
        console.log(customerAcctNo)
        console.log(existingBank)
        console.log(existingType)

        
        })
   
        })

    </script>
</body>
</html>